/** @jsxImportSource https://esm.sh/react@18.2.0 */
import React from "https://esm.sh/react@18.2.0";
import { createRoot } from "https://esm.sh/react-dom@18.2.0/client";

function App() {
  return (
    <div className="responsive-container">
      <header className="site-header">
        <h1>Nature's Canvas</h1>
        <nav className="main-nav">
          <a href="#mountain">Mountains</a>
          <a href="#forest">Forests</a>
          <a href="#coast">Coastlines</a>
        </nav>
      </header>
      
      <main className="card-grid">
        <div className="card mountain-card">
          <div className="card-image">
            <img 
              src="https://maxm-imggenurl.web.val.run/landscape-mountain-lake" 
              alt="Scenic Mountain Lake" 
            />
          </div>
          <div className="card-content">
            <h2>Mountain Retreat</h2>
            <p>Discover the serene beauty of alpine landscapes, where crystal-clear lakes reflect majestic mountain peaks.</p>
            <button>Explore</button>
          </div>
        </div>
        
        <div className="card forest-card">
          <div className="card-image">
            <img 
              src="https://maxm-imggenurl.web.val.run/forest-misty-morning" 
              alt="Misty Forest Morning" 
            />
          </div>
          <div className="card-content">
            <h2>Forest Meditation</h2>
            <p>Immerse yourself in the quiet magic of a misty forest, where ancient trees whisper stories of tranquility.</p>
            <button>Discover</button>
          </div>
        </div>
        
        <div className="card coast-card">
          <div className="card-image">
            <img 
              src="https://maxm-imggenurl.web.val.run/coastal-sunset" 
              alt="Coastal Sunset" 
            />
          </div>
          <div className="card-content">
            <h2>Coastal Horizons</h2>
            <p>Experience the breathtaking moment when the sun meets the ocean, painting the sky in warm, vibrant hues.</p>
            <button>View</button>
          </div>
        </div>
      </main>
      
      <footer className="site-footer">
        <p>Â© 2025 Desmond Mariwa. All rights reserved.</p>
      </footer>
    </div>
  );
}

function client() {
  createRoot(document.getElementById("root")).render(<App />);
}
if (typeof document !== "undefined") { client(); }

export default async function server(request: Request): Promise<Response> {
  return new Response(`
    <html>
      <head>
        <title>Responsive Design with Media Queries</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <script src="https://esm.town/v/std/catch"></script>
        <style>
          :root {
            --primary-color: #2c3e50;
            --secondary-color: #34495e;
            --accent-color: #3498db;
            --text-color: #333;
            --background-color: #f4f4f4;
          }

          * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
          }

          body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
          }

          .responsive-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
          }

          .site-header {
            background-color: var(--primary-color);
            color: white;
            padding: 1rem;
            text-align: center;
            margin-bottom: 2rem;
          }

          .site-header h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
          }

          .main-nav {
            display: flex;
            justify-content: center;
            gap: 1rem;
          }

          .main-nav a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: background-color 0.3s ease;
          }

          .main-nav a:hover {
            background-color: var(--secondary-color);
          }

          .card-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
          }

          .card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
          }

          .card:hover {
            transform: scale(1.03);
          }

          .card-image img {
            width: 100%;
            height: 250px;
            object-fit: cover;
          }

          .card-content {
            padding: 1.5rem;
            text-align: center;
          }

          .card-content h2 {
            margin-bottom: 1rem;
            color: var(--primary-color);
          }

          .card-content button {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s ease;
          }

          .card-content button:hover {
            background-color: var(--secondary-color);
          }

          .site-footer {
            text-align: center;
            padding: 1rem;
            background-color: var(--primary-color);
            color: white;
            margin-top: 2rem;
          }

          /* Tablet Styles */
          @media screen and (max-width: 1024px) {
            .card-grid {
              grid-template-columns: repeat(2, 1fr);
            }

            .site-header h1 {
              font-size: 2rem;
            }
          }

          /* Mobile Styles */
          @media screen and (max-width: 768px) {
            .card-grid {
              grid-template-columns: 1fr;
            }

            .main-nav {
              flex-direction: column;
              align-items: center;
            }

            .site-header h1 {
              font-size: 1.5rem;
            }

            .card-image img {
              height: 200px;
            }
          }
        </style>
      </head>
      <body>
        <div id="root"></div>
        <script type="module" src="${import.meta.url}"></script>
      </body>
    </html>
  `, {
    headers: {
      "content-type": "text/html",
    },
  });
}
